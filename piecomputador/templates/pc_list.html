{% extends 'base.html' %}
{% load static %}

{% block content %}

{{valor}}

<form id="complete-form" method="post" action="{% url 'armar_pc' %}" onsubmit="return handleFormSubmit()">
  {% csrf_token %}

    <div class="form-container">
        <div class="left-column">
            <!-- Campos del formulario de componentes -->
            <label style="font-family:'Brush Script MT', cursive; font-size: 28px;" for="{{ componentes_form.tarjeta_madre.id_for_label }}">Tarjeta madre</label>
            <div class="component-container" style="width: 300px; height: 150px;">
                {{ componentes_form.tarjeta_madre }}
            </div>

            <label style="font-family:'Brush Script MT', cursive; font-size: 28px;" for="{{ componentes_form.procesador.id_for_label }}">Procesador</label>
            <div class="component-container" style="width: 300px; height: 150px;">
                {{ componentes_form.procesador }}
            </div>

            <label style="font-family:'Brush Script MT', cursive; font-size: 28px;" for="{{ componentes_form.memoria_ram.id_for_label }}">Memoria RAM</label>
            <div class="component-container" style="width: 300px; height: 150px;">
                {{ componentes_form.memoria_ram }}
            </div>

            <label style="font-family:'Brush Script MT', cursive; font-size: 28px;" for="{{ componentes_form.tarjeta_grafica.id_for_label }}">Tarjeta gráfica</label>
            <div class="component-container" style="width: 300px; height: 150px;">
                {{ componentes_form.tarjeta_grafica }}
            </div>
        </div>

        <div class="right-column">
            <!-- Campos del formulario de precio -->
            <label style="font-family:'Brush Script MT', cursive; font-size: 30px;" for="precio_form">Precio:</label>
            <input type="number" name="precio_form" id="precio_form" title="Ingrese un número entero" style="width: 380px; height: 20px; text-align: center;" onclick="borrarContenido('precio_form')" value='0'>

            <label style="font-family:'Brush Script MT', cursive; font-size: 30px;" for="gama">Gama:</label>
            <div id="gama-container" class="non-editable-container"style="width: 385px; height: 25px; text-align: center;">{{ gama_value }}</div>

            <label style="font-family:'Brush Script MT', cursive; font-size: 30px;" for="precio">Precio:</label>
            <div id="precio-container" class="non-editable-container" style="width: 385px; height: 25px; text-align: center;">{{ precio_value }}</div>

            <br />
            <br />
        </div>
        <input type="submit" value="Guardar" class="save-button">
    </div>

</form>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<script>
    $(document).ready(function() {
        // Al cambiar la selección de la tarjeta madre
        $('#id_tarjeta_madre').change(function() {
            fieldName = "tarjeta_madre";  // Identificador único del componente
            selectedValue = $(this).val();

            alert('Se ha cambiado la selección de ' + fieldName + ':'+ selectedValue);
    
            // Enviar datos al servidor utilizando AJAX
            $.ajax({
                type: 'POST',
                url: '/pc/',
                data: {
                    field_name: "tarjeta_madre",
                    selected_value: selectedValue,
                    csrfmiddlewaretoken: $('input[name="csrfmiddlewaretoken"]').val(),
                },
                success: function(data) {
                    alert('Respuesta del servidor:', data);
                }, 
                error: function(xhr, status, error) {
                    console.error('Error en la solicitud AJAX:', error);
                }
            });
        });
    
        // Repite el proceso para los demás campos del formulario
        // ...
    
        // Puedes agregar eventos adicionales según sea necesario
    });
    
</script>



<script>
    function borrarContenido(idCampo) {
        document.getElementById(idCampo).value = '';
    }
</script>

<link rel="stylesheet" type="text/css" href="{% static 'css/stylepc.css' %}" />

<style>
    .form-container {
        display: flex;
        justify-content: space-between;
        margin: 20px; /* Ajusta según tus necesidades */
    }

    .left-column {
        position: relative;
        right: 150px;
        width: 65%; /* Ajusta según tus necesidades */
        box-sizing: border-box;
        margin-right: 20px; /* Márgenes entre columnas */
    }

    .component-container {
        width: 100%;
        height: 10px;
        box-sizing: border-box;
        margin-bottom: -100px;
    }

    .right-column {
        width: 45%; /* Ajusta según tus necesidades */
        box-sizing: border-box;
    }

    .non-editable-container {
        width: 100%; /* Hacemos que el contenedor ocupe todo el ancho disponible */
        height: 25px;
        text-align: center;
        padding: 5px;
        border: 1px solid rgb(0, 0, 0);
        box-sizing: border-box;
        display: inline-block;
    }

    .save-button {
        margin-top: 20px;
        width: 100px; /* Ajusta según tus necesidades */
        height: 30px; /* Ajusta según tus necesidades */
        position: relative;
        top: 400px;
        right: 270px;
    }
</style>
{% endblock %}
